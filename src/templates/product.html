<!DOCTYPE html>
<html>
<head>


<script type="text/javascript" 
src="{{ url_for('static', 
filename='js/jquery.js') }}"></script>
<script type="text/javascript" 
src="{{ url_for('static', 
filename='js/bootstrap.bundle.min.js') }}"></script>
<script type="text/javascript" 
src="{{ url_for('static', 
filename='js/bootstrap.min.js') }}"></script>
<script type="text/javascript" 
src="{{ url_for('static', 
filename='js/backend.js') }}"></script>

<link rel="stylesheet" href="static/css/bootstrap.min.css">


    <style type="text/css">

html, body {
  height: 100%;

  display: flex;
  flex-direction: column;
}

body > * {
  flex-shrink: 0;
}


.second_row {
  flex-grow: 1;
}

.legend_of_input
{
  color: black; 
  font-weight: bold;
  font-size: 150%;
}

.text_input_field
{
  font-weight: bold;
  font-size: 150%;
  width: 100%;
  background-color: black; 
  color: white;
  border-radius: 500px;
}

    </style>
</head>
<body class="">


<div class="bg-dark p-2 container-fluid mx-auto" style="">
  <div class="text-warning font-weight-bold  
  container-fluid align-middle" 
  style="font-size: 300%; width: 500px;">Product</div>

</div>

<div class="second_row bg-success 
container-fluid mx-auto" style="bottom:0px;"
  style="height: 100%;" 
>
  <div class="row" style="height: 100%;">
      <div class="container col-4 p-4" style="height: 100%;">
        
        <div>
        <h2 class="" style="color:black;font-weight: bold;
        height: 100%;" id="p_name">
        </h2>
        <h2 class="" style="color:black;font-weight: bold;
        height: 100%;">Price: <span id="p_price"></span>
        </h2>
        
      </div>
  </div>
      













      <div class="col-8 bg-primary pr-2" 
      style="height: auto" style="height: 100%;">
        <h2 class="" 
        style="color:black;font-weight:
        bold;font-size: 400%;"><b>Amount: 
          <span id="amount">1</span>
        </b></h2>
      <div class="d-flex bd-highlight mb-3">
  <div class="mr-auto p-2 bd-highlight">
    <button class="btn btn-danger"
      style=""
      onclick="subtract_one()" 
      >
      <div class="pr-4 pl-4" 
      style="font-size: 400%;font-weight: bold">-
    </div>
    </button>

  </div>
  <div class="p-2 bd-highlight">
    <button class="btn btn-success"
      style=""><div class="pr-4 pl-4" 
      style="font-size: 400%;font-weight: bold"
      onclick="add_one()" 
      >+</div>
    </button>

  </div>
</div>




<h2 class="" 
        style="color:black;font-weight:
        bold;font-size: 400%;"><b>Total Price: 
          <span id="total_price"></span>
        </b></h2>


  <button type="button" class="btn btn-success mb-4"
  style="" onclick="add_to_cart()"><div class="" 
  style="font-size: 200%;font-weight: bold">Add to Cart</div></button>
        
      </div>
  </div>


</div>
<div class="bg-dark d-flex justify-content-between pt-1 pb-2" >
  <div class="container-fluid" 
  style="width: 500px; font-weight: bold;color: black;
  font-size: 300%;">
<a href="https://github.com/OmarThinks/Cantiin" target="_blank">
<button type="button" class="btn btn-outline-success m-1"
style="font-weight: bold;
  font-size: 60%;">
  <svg xmlns="http://www.w3.org/2000/svg" width="50" 
  height="50" fill="currentColor" class="bi bi-github" 
  viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
</svg>
View source code on github</button>
</a>
  </div>  
</div>








<script type="text/javascript">
  price = 0;
  amount = 1;
  total_price;
  function  setup_all()
  {
    document.getElementById('amount').innerHTML = amount;
    total_price = price * amount;
    document.getElementById('total_price').innerHTML 
    = total_price;

  }
  setup_all();


  function add_one()
  {amount++;setup_all();console.log("Adding One");}
  function subtract_one()
  { if (amount == 0) {return;}
    amount--;setup_all();console.log("Subtracting One");}


</script>


<script type="text/javascript">
  

const product_id = new URLSearchParams(
  window.location.search).get("id");

function getSpecificProduct(data,id)
{
  for(p_index in data["products"])
  {
    if(data["products"][p_index]["id"]==id)
    {
      return data["products"][p_index];
    }
  }
}

function fill_fields(data,id)
{
  the_product = getSpecificProduct(data,id);
  console.log(the_product);
  document.getElementById('p_name').innerHTML=the_product["name"];
  document.getElementById('p_price').innerHTML=the_product["price"];
  console.log(the_product["name"]);
  console.log(the_product["price"]);
  price = the_product["price"];
  setup_all();

}

get_products().then(function(value)
  {fill_fields(value,id=product_id);});

/*  document.getElementById('p_name').innerHTML="abc";
  document.getElementById('p_price').innerHTML=5432;
*/

function add_to_cart()
{
  post_orders(product_id,amount).then
  (
    function(value)
    {
      window.location.href = "cart"
    }
  )
}

</script>


</body>
</html>